# QHD Invoice Generator v2.2.0 - Release Notes

**Release Date:** 2025-10-30

---

## 📦 下载 Downloads

### Windows 用户

**推荐下载（安装版）：**
- 📥 **QHD Invoice Generator Setup 2.2.0.exe** (73 MB)
  - 带安装向导的完整安装包
  - 自动创建桌面快捷方式和开始菜单项
  - 支持自定义安装目录
  - 推荐大多数用户使用

**便携版（无需安装）：**
- 📥 **QHD Invoice Generator 2.2.0.exe** (73 MB)
  - 单文件便携版，无需安装
  - 适合USB随身携带或临时使用
  - 双击即可运行

**系统要求：** Windows 10 或更高版本（64位）

---

### macOS 用户

**Intel 芯片 Mac：**
- 📥 **QHD Invoice Generator-2.2.0.dmg** (94 MB)
  - DMG 磁盘镜像，双击挂载后拖拽到应用程序文件夹
- 📥 **QHD Invoice Generator-2.2.0-mac.zip** (91 MB)
  - ZIP 压缩包，解压后拖拽到应用程序文件夹

**Apple Silicon (M1/M2/M3) Mac：**
- 📥 **QHD Invoice Generator-2.2.0-arm64.dmg** (89 MB)
  - 原生支持 Apple Silicon 的优化版本
  - DMG 磁盘镜像格式
- 📥 **QHD Invoice Generator-2.2.0-arm64-mac.zip** (91 MB)
  - 原生支持 Apple Silicon 的优化版本
  - ZIP 压缩包格式

**系统要求：** macOS 10.12 (Sierra) 或更高版本

**首次运行提示：** 如果出现"无法打开，因为它来自身份不明的开发者"，请右键点击应用 → 选择"打开" → 点击"打开"按钮。

---

## ✨ 新功能 What's New

### 1. 📊 表格列宽优化
- **问题修复：** 解决了大数字（如 3,000,000）在 NET WT. 和 QTY. 列中换行的问题
- **QTY 列宽度增加 50%**：从 8% 增加到 12%
- **NET WT 列宽度增加 25%**：从 8% 增加到 10%
- **字体优化**：表格字体缩小 7%，提升空间利用率
- **更清晰的打印输出**：所有数字单行显示，更专业

### 2. 📦 装箱单包装数量功能
**全新的"批量包装"模式，大幅提升工作效率！**

- ✅ **新增"件数 Quantity"字段**：支持设置每个包装的数量（默认1）
- ✅ **实时总计显示**：绿色背景显示总毛重和总体积
- ✅ **自动计算**：
  - 总毛重 = 单箱毛重 × 件数
  - 总体积 = 单箱体积 × 件数
- ✅ **UI 优化**：
  - 标签更清晰："单箱毛重"、"单箱体积"
  - 总计框醒目显示：绿色背景，一目了然

**业务价值：**
- 5个相同箱子，只需创建1个 Package，填写件数=5
- 减少重复操作，提高录入效率
- 自动计算避免手动错误

### 3. 🐛 Bug 修复
- **修复：** 在发票模式点击"步骤1：确认修订"后，无法切换到装箱单模式的问题
- **改进：** 即使表单锁定，仍可在发票和装箱单之间自由切换
- **体验提升：** 切换时自动解锁表单，工作流程更顺畅

---

## 📋 完整功能列表

### 基础功能
- ✅ 创建商业发票 (Commercial Invoice)
- ✅ 创建形式发票 (Proforma Invoice)
- ✅ 创建普通发票 (Standard Invoice)
- ✅ 创建装箱单 (Packing List)
- ✅ 多币种支持 (USD, RMB, EUR, GBP, JPY)
- ✅ 自定义贸易条款 (Incoterms: FOB, CIF, EXW, etc.)
- ✅ 自定义付款条款 (Payment Terms)
- ✅ 原产地标注

### 数据管理
- ✅ 发货方/收货方/付款方资料管理
- ✅ 银行信息管理
- ✅ 文档修订版本控制 (Revision A, B, C...)
- ✅ 历史修订查看和加载
- ✅ 本地数据存储（localStorage）
- ✅ 无需网络，完全离线使用

### 打印功能
- ✅ 优化的打印布局
- ✅ 自动分页
- ✅ 标准化格式
- ✅ 计算机生成标注
- ✅ 页码显示

### 用户体验
- ✅ 双语界面（中文/英文）
- ✅ 实时预览
- ✅ 自动计算金额和重量
- ✅ 表单验证
- ✅ 快捷操作

---

## 🔄 从旧版本升级

### 数据兼容性
- ✅ **完全向后兼容** v2.1 和 v2.0 的数据
- ✅ 所有已保存的发票和装箱单都会保留
- ✅ 旧的 Package 数据自动设置 packages = 1
- ✅ 无需手动迁移数据

### 升级步骤
1. 下载并安装 v2.2.0
2. 首次运行会自动加载现有数据
3. 建议测试几份文档确保一切正常
4. 可以安全卸载旧版本

**注意：** 由于使用 localStorage 存储数据，升级后数据自动保留在浏览器中。

---

## 📸 新功能截图

### Package 数量功能
```
📦 包装 Package #1                                    [✖]
┌──────────────────────────────────────────────────────┐
│ [件数: 5] [类型: Carton▼] [尺寸: 120×80×100] [单箱毛重: 50.00]
│ [单箱体积: 0.960 CBM]  [总计: 毛重 250.00 KG | 体积 4.800 CBM]
│                                                      │
│ 包装内货物 Items in this Package:                    │
│ ... (items)                                          │
└──────────────────────────────────────────────────────┘
```

### 表格显示优化
- QTY 列现在可以完整显示大数字如 3,000,000
- NET WT 列显示更清晰，如 1,320.00
- 所有数字单行显示，不会换行

---

## 🛠️ 技术细节

### 构建信息
- **Electron 版本：** 28.3.3
- **Node.js 要求：** 16.x 或更高
- **Electron Builder：** 24.13.3

### 文件大小
- **Windows 安装版：** 73 MB
- **Windows 便携版：** 73 MB
- **macOS Intel DMG：** 94 MB
- **macOS Apple Silicon DMG：** 89 MB

### 安全说明
- ✅ 所有数据存储在本地，不上传到任何服务器
- ✅ 完全离线工作，保护隐私和商业机密
- ✅ 无需注册或登录

**代码签名：** 本版本未进行代码签名，macOS 用户首次打开可能需要在"系统偏好设置 → 安全性与隐私"中允许运行。

---

## 📝 已知问题

目前没有已知的严重问题。

如果遇到问题，请通过以下方式反馈：
- 📧 Email: xuan.zhang@qhdpv.com
- 💬 GitHub Issues: https://github.com/qhdpv/invoice-generator/issues

---

## 🎯 下一步计划

我们正在考虑以下功能：
- 批量导出功能
- 文档模板保存
- 多语言支持扩展
- PDF 直接导出
- 云同步功能（可选）

**欢迎提供建议和反馈！**

---

## 🙏 致谢

感谢所有用户的反馈和建议，帮助我们不断改进产品。

---

## 📄 更新历史

- **v2.2.0** (2025-10-30) - 表格优化 + Package 数量功能 + Bug 修复
- **v2.1.0** (2024-10-22) - 初始 Electron 打包版本
- **v2.0** - PWA 网页版本

---

**完整的技术变更日志请参阅：** [CHANGELOG_v2.2.md](CHANGELOG_v2.2.md)

---

© 2024-2025 QHD Company. All rights reserved.
